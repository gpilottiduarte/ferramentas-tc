<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guia de Estilos SeguraÂ®</title>
  
  <!-- Meta tags de seguranÃ§a -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="X-XSS-Protection" content="1; mode=block">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  
  <!-- Content Security Policy -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self';">
  
  <!-- Favicon para evitar erro 404 -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“‹</text></svg>">
  
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
  <header>
    <div class="header-content">
      <h1>Guia de Estilos SeguraÂ®</h1>
      <input
        type="text"
        id="global-search"
        placeholder="ğŸ” Buscar em todo o guia e pressione Enter"
        aria-label="Buscar no guia"
        role="searchbox"
      />
    </div>
  </header>

  <!-- Loading indicator -->
  <div id="loading" class="loading hidden">
    <div class="loading-spinner"></div>
    <p>Carregando guia de estilos...</p>
  </div>

  <!-- View inicial com menu de seÃ§Ãµes -->
  <div id="home-view" class="container">
    <aside id="toc">
      <h2>SeÃ§Ãµes</h2>
      <ul id="section-list">
        <!-- SeÃ§Ãµes serÃ£o carregadas dinamicamente -->
      </ul>
    </aside>

    <main>
      <h2>Bem-vindo ao Guia de Estilos SeguraÂ®</h2>
      <p>Selecione uma seÃ§Ã£o no menu lateral para visualizar o conteÃºdo do guia de estilos.</p>
      
      <!-- Resultados da busca -->
      <div id="search-results" aria-live="polite" aria-label="Resultados da busca"></div>
    </main>
  </div>

  <!-- View de conteÃºdo -->
  <div id="content-view" class="container hidden">
    <aside>
      <button id="back-button">â† Voltar ao menu</button>
    </aside>
    
    <main>
      <div id="content">
        <!-- ConteÃºdo da seÃ§Ã£o serÃ¡ carregado aqui -->
      </div>
    </main>
  </div>

  <!-- RodapÃ© -->
  <footer class="main-footer">
    <div class="footer-content">
      <div class="footer-links">
        <a href="README.html" class="footer-link">DocumentaÃ§Ã£o</a>
        <span class="footer-separator">â€¢</span>
        <span class="footer-version">VersÃ£o 2.1</span>
        <span class="footer-separator">â€¢</span>
        <span class="footer-company">SeguraÂ®</span>
      </div>
      <div class="footer-copyright">
        <p>&copy; 2025 SeguraÂ®. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>

  <script src="script.js"></script>
  
  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            console.log('âœ… Service Worker registered successfully:', registration.scope);
            
            // Handle updates
            registration.addEventListener('updatefound', () => {
              const newWorker = registration.installing;
              newWorker.addEventListener('statechange', () => {
                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                  console.log('ğŸ”„ New service worker available');
                  // Optionally show update notification to user
                }
              });
            });
          })
          .catch(error => {
            console.error('âŒ Service Worker registration failed:', error);
          });
      });
    } else {
      console.log('Service Worker not supported');
    }
  </script>
</body>
</html>
